"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = {
    async end(giveawayRepo, msg) {
        await msg.fetch();
        giveawayRepo.delete({ message: msg.id });
        const reaction = await msg.reactions.cache.filter(r => r.emoji.name === '🎁').first().fetch();
        await reaction.users.fetch();
        const winner = reaction.users.cache.filter(w => !w.bot).random();
        const embed = msg.embeds[0];
        embed.setTitle("Giveaway!");
        embed.setFooter("Giveaway Ended");
        embed.setColor("RANDOM");
        embed.addField("Winner:", winner ? `**${winner} (${winner.tag})**` : "No winners 😟");
        msg.edit(embed);
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR2l2ZWF3YXlNYW5hZ2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3N0cnVjdHVyZXMvZ2l2ZWF3YXlzL0dpdmVhd2F5TWFuYWdlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUlBLGtCQUFlO0lBQ1gsS0FBSyxDQUFDLEdBQUcsQ0FBQyxZQUFtQyxFQUFFLEdBQVk7UUFDdkQsTUFBTSxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDbEIsWUFBWSxDQUFDLE1BQU0sQ0FBQyxFQUFFLE9BQU8sRUFBRSxHQUFHLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUV6QyxNQUFNLFFBQVEsR0FBb0IsTUFBTSxHQUFHLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUMvRyxNQUFNLFFBQVEsQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDN0IsTUFBTSxNQUFNLEdBQVMsUUFBUSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUM7UUFFdkUsTUFBTSxLQUFLLEdBQWlCLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDMUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUM1QixLQUFLLENBQUMsU0FBUyxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFDbEMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUN6QixLQUFLLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssTUFBTSxLQUFLLE1BQU0sQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDdEYsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNwQixDQUFDO0NBQ0osQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1lc3NhZ2UsIE1lc3NhZ2VFbWJlZCwgTWVzc2FnZVJlYWN0aW9uLCBVc2VyIH0gZnJvbSBcImRpc2NvcmQuanNcIjtcclxuaW1wb3J0IHsgUmVwb3NpdG9yeSB9IGZyb20gXCJ0eXBlb3JtXCI7XHJcbmltcG9ydCB7IEdpdmVhd2F5cyB9IGZyb20gXCIuLi8uLi9vdGhlci9HaXZlYXdheXNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICAgIGFzeW5jIGVuZChnaXZlYXdheVJlcG86IFJlcG9zaXRvcnk8R2l2ZWF3YXlzPiwgbXNnOiBNZXNzYWdlKSB7XHJcbiAgICAgICAgYXdhaXQgbXNnLmZldGNoKCk7XHJcbiAgICAgICAgZ2l2ZWF3YXlSZXBvLmRlbGV0ZSh7IG1lc3NhZ2U6IG1zZy5pZCB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVhY3Rpb246IE1lc3NhZ2VSZWFjdGlvbiA9IGF3YWl0IG1zZy5yZWFjdGlvbnMuY2FjaGUuZmlsdGVyKHIgPT4gci5lbW9qaS5uYW1lID09PSAn8J+OgScpLmZpcnN0KCkuZmV0Y2goKTtcclxuICAgICAgICBhd2FpdCByZWFjdGlvbi51c2Vycy5mZXRjaCgpO1xyXG4gICAgICAgIGNvbnN0IHdpbm5lcjogVXNlciA9IHJlYWN0aW9uLnVzZXJzLmNhY2hlLmZpbHRlcih3ID0+ICF3LmJvdCkucmFuZG9tKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGVtYmVkOiBNZXNzYWdlRW1iZWQgPSBtc2cuZW1iZWRzWzBdO1xyXG4gICAgICAgIGVtYmVkLnNldFRpdGxlKFwiR2l2ZWF3YXkhXCIpO1xyXG4gICAgICAgIGVtYmVkLnNldEZvb3RlcihcIkdpdmVhd2F5IEVuZGVkXCIpO1xyXG4gICAgICAgIGVtYmVkLnNldENvbG9yKFwiUkFORE9NXCIpO1xyXG4gICAgICAgIGVtYmVkLmFkZEZpZWxkKFwiV2lubmVyOlwiLCB3aW5uZXIgPyBgKioke3dpbm5lcn0gKCR7d2lubmVyLnRhZ30pKipgIDogXCJObyB3aW5uZXJzIPCfmJ9cIik7XHJcbiAgICAgICAgbXNnLmVkaXQoZW1iZWQpO1xyXG4gICAgfVxyXG59Il19